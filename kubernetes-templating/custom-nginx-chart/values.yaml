app:
  name: deploy-homework6
  replicasCounts: 3
  selectorLabel: nginx
  maxUnavailablePods: 1
  namespace: &default-namespace "homework"
  admin: &cluster-admin "cd"
  monitoring: &cluster-metrics-monitoring "monitoring"
  podSaName: *cluster-metrics-monitoring
  volumes:
    - name: &pvc-volume-name workdir
      data:
        persistentVolumeClaim:
          claimName: &pvc-name pvc-homework6
    - name: &cm-volume-name cm-volume
      data:
        configMap:
          name: &cm-name cm-homework6
  containers:
    -
      name: web-server
      create: "true"
      image: custom-nginx
      tag: 1.0.0-SNAPSHOT
      volumeMounts:
        -
          name: *pvc-volume-name
          mountPath: /homework
        -
          name: *cm-volume-name
          mountPath: "/homework/conf"
      livelinessProbeEnable: "true"
      lifecycleEnable: "true"
  initContainers:
    -
      name: web-server
      create: "true"
      image: custom-nginx
      tag: 1.0.0-SNAPSHOT
      volumeMounts:
        - name: workdir
          mountPath: /homework
      command: [ "/bin/sh", "-c" ]
      args: []





configMaps:
  -
    create: true
    name: *cm-name
    namespace: *default-namespace
    data:
      test: "true"
      greeting: "Hello, world!"
      homework_number: "4"


storageclass:
  create: true
  name: &custom-storage-name sc-homework6
  provisioner: k8s.io/minikube-hostpath
  reclaimPolicy: Retain
  volumeBindingMode: Immediate

pvcs:
  -
    create: true
    namespace: *default-namespace
    name: *pvc-volume-name
    storageClassName: *custom-storage-name
    accessModes:
      -
        ReadWriteMany
    storageCapacity: 1Gi


roles:
  -
    create: true
    type: &cluster-role ClusterRole
    name: &metrics-role "metrics-role"
    namespace: *default-namespace
    rules:
    -
      nonResourceURLs: ["/metrics"]
      verbs: ["get"]
  -
    create: false
    type: *cluster-role
    name: &admin-role admin

serviceAccounts:
  -
    create: true
    name: *cluster-admin
    createSecret: "true"
    namespace: *default-namespace
    bindings:
      -
        createBinding: true
        type: RoleBinding
        roleKind: *cluster-role
        roleName: *admin-role
  -
    create: true
    name: *cluster-metrics-monitoring
    namespace: *default-namespace
    bindings:
      -
        createBinding: true
        type: ClusterRoleBinding
        roleKind: *cluster-role
        roleName: *metrics-role



